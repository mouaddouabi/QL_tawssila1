<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout= "http://www.ultraq.net.nz/thymeleaf/layout"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
><head>
<meta charset="utf-8">
<link rel="stylesheet" href="css/app.css">
<link rel="stylesheet" href="css/DetailsAnnonce.css">
<link rel="stylesheet" href="css/Profil.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css">
<link rel="shortcut icon" type="image/png"  href="https://freeiconshop.com/wp-content/uploads/edd/car-flat.png"/>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
<title>TAWSSILA</title>
</head>
<body style="background-color: #EFEEED;">
<div th:replace="header :: header">
	</div>
		<!-- inside -->
		
			
		
<hr>


<div class="container bootstrap snippet">
    
  	<div class="row">
  		
  		<div class="card-deck col-md-4">
      		<div class="card">
      		
      		<div align="center">
      			<img th:src="*{user.image}" width=150px >
      		</div>
      		
      		
        				<div class="card-body">
     					     <h5 class="card-title">Activités</h5>
     					     	
					         
					            <ul class="list-group">
						            <li class="list-group-item  list-group-item-success"><span class="pull-left"><strong>Annonces</strong></span> <i class="fa fa-dashboard fa-1x"></i> <span style="margin-left: 55%" th:text="${sizeAnnonces}"></span> </li>
						            <li class="list-group-item  list-group-item-success"><span class="pull-left"><strong>Note</strong></span> <span style="margin-left: 61%" th:text="${user.rating}"></span> </li>
						         </ul> 
					           <ul>
					<li class="list-group-item btn btn-light " align="center"> <a href="/mesAnnonces">Voir mes annonces</a>  <i class="fa fa-dashboard fa-1x"></i></li>
						</ul>
					        </div>
					        <div class="card-footer">
					       
                            </div>
					            </div>
					       
                                   </div>

          
        <!--/col-3-->
        
        
        
        
				<div class="col-md-8">			
					<div class="form-bg">
					    <div class="container-fluid">
					        <div class="row">
				            <div class="col-md-8 offset-2">
				            
				        <div th:if="${param.error}">
							<div class="alert alert-danger">
								Mot de passe érroné !
							</div>
						</div>
						
						<div th:if="${param.success}">
							<div class="alert alert-success">
								Mot de passe modifié  !
							</div>
						</div>
						
						<div th:if="${param.successProfil}">
							<div class="alert alert-success">
								Profil modifié avec succès !
							</div>
						</div>
								
				                <form   th:action="@{/UpdateProfil}" method="post" th:object="${user}">
				                  <input type="hidden"     th:field="*{id}"  id="id" th:value="${user.id}" >
				                
								 <h4>Modifier les informations de votre profil </h4> <br>
								 <div class="form-group">
								 
								 <label for="user" class="control-label" >Prénom</label><br> 
								 <input required="required" type="text" th:value="${user.prenom}"  th:field="*{prenom}"  class="form-control" > <br>
								 
								 <label for="user" class="control-label" >Nom</label><br> 
								 <input required="required" type="text" th:value="${user.nom}"  th:field="*{nom}"  class="form-control" > <br>
								 
								 
								 
										<label class="control-label" for="age">Age</label>
										<input id="age" class="form-control" th:field="*{age}" required autofocus="autofocus" />				
									
										<label class="control-label" for="sexe">Sexe</label>
										<select required="required" id="sexe" autofocus="autofocus" class="mb-4 browser-default custom-select" th:field="*{sexe}" >
							  				<option value="M">Masculin</option>
							  				<option value="F">Feminin</option>
							  			</select>
					
								 <label for="user" class="control-label" >Biographie</label><br> 
								 <textarea  type="text" th:value="${user.biographie}"  th:field="*{biographie}" class="form-control" > <br>
								 </textarea>
								 
								 
								 
								 <button  type="submit"   class="btn btn-primary">Modifier </button>
								 	
								
								        		 	
								
					
								 								 <input hidden="hidden" type="text" th:value="${user.email}"  th:field="*{email}" class="form-control" > <br>
								 
								 
											</div>
								</form>
								
						 
								<button 	type="button" id="change" onclick="checker()"class="btn btn-warning" > 	Changer le mot de passe </button> <hr>			
										<div id="changePassword">
										    <form   th:action="@{/changePassword}" method="post" th:object="${user}">
											<input type="hidden"     th:field="*{id}"  id="id" th:value="${user.id}" >
										
											 <label for="user">Ancien mot de passe<span class="requis"></span></label><br> 
						              		 <input required="required" type="password"  name="oldPassword"  class="form-control" > <br>
								 
					             			 <label for="user">Nouveau mot de passe<span class="requis"></span></label><br> 
						              		 <input required="required" type="password" name="newPassword"  class="form-control" > <br>
						              		 
						              		 	 <button  type="submit"   class="btn btn-primary">Modifier</button>
						              		 
                                                      
                                                                          
											
											
										</form>
										</div>
										
								    </div>
								</div>
							</div>
						</div>
				</div></div>
							
					

        </div><!--/col-9-->
		
        
    	
		 <!-- footer -->
			 <div th:replace="footer :: footer">
	</div>

	

<script type="text/javascript">
var button = document.getElementById('change');
document.getElementById("changePassword").style.display = 'none';

button.onclick=function checker(){
		
			document.getElementById("changePassword").style.display = '';
		
		
}
$(document).ready(function() {

    
    var readURL = function(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();

            reader.onload = function (e) {
                $('.avatar').attr('src', e.target.result);
            }
    
            reader.readAsDataURL(input.files[0]);
        }
    }
    

    $(".file-upload").on('change', function(){
        readURL(this);
    });
});

</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>


</body>
</html>